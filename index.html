<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Tool Aggregator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #1a1a1a; /* Dark background */
            color: #e0e0e0; /* Light text */
            overflow: hidden; /* Prevent body scroll, allow inner divs to scroll */
        }
        /* Custom scrollbar for better aesthetics */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #2d2d2d;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: #555;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #777;
        }
    </style>
</head>
<body class="flex h-screen">

    <aside class="w-64 bg-[#202020] flex-shrink-0 p-4 border-r border-[#333] overflow-y-auto shadow-lg rounded-tr-lg rounded-br-lg">
        <div class="text-xl font-semibold text-white mb-6" id="sidebar-title" data-lang-key="sidebar-title">AI Tools</div>
        <nav>
            <ul id="category-list">
                <li class="mb-2">
                    <a href="#" data-category="text-generation" class="flex items-center p-3 rounded-lg text-gray-300 hover:bg-[#333] transition-colors duration-200">
                        <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>
                        <span data-lang-key="text-generation-category">Text Generation</span>
                    </a>
                </li>
                <li class="mb-2">
                    <a href="#" data-category="image-generation" class="flex items-center p-3 rounded-lg text-gray-300 hover:bg-[#333] transition-colors duration-200">
                        <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                        <span data-lang-key="image-generation-category">Image Generation</span>
                    </a>
                </li>
                <li class="mb-2">
                    <a href="#" data-category="code-generation" class="flex items-center p-3 rounded-lg text-gray-300 hover:bg-[#333] transition-colors duration-200">
                        <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"></path></svg>
                        <span data-lang-key="code-generation-category">Code Generation</span>
                    </a>
                </li>
                <li class="mb-2">
                    <a href="#" data-category="speech-to-text" class="flex items-center p-3 rounded-lg text-gray-300 hover:bg-[#333] transition-colors duration-200">
                        <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11a7 7 0 01-7 7m0 0a7 7 0 01-7-7m7 7v4m0 0H8m4 0h4m-4-8a4 4 0 11-8 0 4 4 0 018 0z"></path></svg>
                        <span data-lang-key="speech-to-text-category">Speech-to-Text</span>
                    </a>
                </li>
                <li class="mb-2">
                    <a href="#" data-category="text-to-speech" class="flex items-center p-3 rounded-lg text-gray-300 hover:bg-[#333] transition-colors duration-200">
                        <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v12m-3 3H9m12-3V9M9 15V9m12 0a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2h4l5 2.5V15z"></path></svg>
                        <span data-lang-key="text-to-speech-category">Text-to-Speech</span>
                    </a>
                </li>
                <li class="mb-2">
                    <a href="#" data-category="data-analysis" class="flex items-center p-3 rounded-lg text-gray-300 hover:bg-[#333] transition-colors duration-200">
                        <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 12l3-3 3 3 4-4M18 21V3M4 12h16"></path></svg>
                        <span data-lang-key="data-analysis-category">Data Analysis</span>
                    </a>
                </li>
                <li class="mb-2">
                    <a href="#" data-category="translation" class="flex items-center p-3 rounded-lg text-gray-300 hover:bg-[#333] transition-colors duration-200">
                        <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>
                        <span data-lang-key="translation-category">Translation</span>
                    </a>
                </li>
                <li class="mb-2">
                    <a href="#" data-category="summarization" class="flex items-center p-3 rounded-lg text-gray-300 hover:bg-[#333] transition-colors duration-200">
                        <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
                        <span data-lang-key="summarization-category">Summarization</span>
                    </a>
                </li>
                <li class="mb-2">
                    <a href="#" data-category="chatbot" class="flex items-center p-3 rounded-lg text-gray-300 hover:bg-[#333] transition-colors duration-200">
                        <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"></path></svg>
                        <span data-lang-key="chatbot-category">Chatbot</span>
                    </a>
                </li>
                <li class="mb-2">
                    <a href="#" data-category="object-detection" class="flex items-center p-3 rounded-lg text-gray-300 hover:bg-[#333] transition-colors duration-200">
                        <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h.01M19 18h.01M12 18h.01M6 12V6a2 2 0 012-2h8a2 2 0 012 2v6m-4 6H8a2 2 0 01-2-2v-4a2 2 0 012-2h8a2 2 0 012 2v4a2 2 0 01-2 2z"></path></svg>
                        <span data-lang-key="object-detection-category">Object Detection</span>
                    </a>
                </li>
                <li class="mb-2">
                    <a href="#" data-category="idea-brainstormer" class="flex items-center p-3 rounded-lg text-gray-300 hover:bg-[#333] transition-colors duration-200">
                        <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v14m-7 0h14a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg>
                        <span data-lang-key="idea-brainstormer-category">Idea Brainstormer ✨</span>
                    </a>
                </li>
            </ul>
        </nav>
    </aside>

    <main class="flex-1 p-8 overflow-y-auto">
        <div class="flex justify-end mb-4">
            <label for="language-select" class="text-gray-300 mr-2" data-lang-key="select-language">Select Language:</label>
            <select id="language-select" class="bg-[#333] text-white p-2 rounded-md">
                <option value="en" data-lang-key="lang-english">English</option>
                <option value="te" data-lang-key="lang-telugu">Telugu</option>
            </select>
        </div>
        <div id="tool-preview-container" class="bg-[#282828] rounded-xl shadow-xl p-6 min-h-full flex flex-col justify-between">
            <h2 id="tool-title" class="text-3xl font-bold text-white mb-4" data-lang-key="welcome-title">Welcome to the AI Tool Aggregator!</h2>
            <p id="tool-description" class="text-gray-400 mb-8 leading-relaxed" data-lang-key="welcome-description">
                Select an AI tool from the left sidebar to see its description and interact with its features.
                This platform helps you explore various AI capabilities in one place.
            </p>

            <div id="tool-interaction-area" class="flex-grow flex flex-col">
                </div>
        </div>
    </main>

    <script>
        // Place your deployed Google Cloud Function URL here
        // For example: const BACKEND_URL = "https://your-project-id.cloudfunctions.net/ai-tool-proxy";
        // For development, you can use your local function URL (e.g., http://localhost:8080)
        const BACKEND_URL = "https://ai-aggregator-backend-1.onrender.com/ai-tool-proxy"; // Replace this with your actual URL

        // Generic function to call the backend
        async function callBackend(toolCategory, prompt) {
            const payload = {
                tool_category: toolCategory,
                prompt: prompt
            };

            try {
                const response = await fetch(BACKEND_URL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.error || `HTTP error! status: ${response.status}`);
                }

                const result = await response.json();
                return result.result; // Return the 'result' key from the backend
            } catch (error) {
                console.error(`Error calling backend for ${toolCategory}:`, error);
                throw error; // Re-throw the error for further processing
            }
        }

        // Translations object
        const translations = {
            en: {
                // Sidebar
                'sidebar-title': 'AI Tools',
                'text-generation-category': 'Text Generation',
                'image-generation-category': 'Image Generation',
                'code-generation-category': 'Code Generation',
                'speech-to-text-category': 'Speech-to-Text',
                'text-to-speech-category': 'Text-to-Speech',
                'data-analysis-category': 'Data Analysis',
                'translation-category': 'Translation',
                'summarization-category': 'Summarization',
                'chatbot-category': 'Chatbot',
                'object-detection-category': 'Object Detection',
                'idea-brainstormer-category': 'Idea Brainstormer ✨',

                // Language Selector
                'select-language': 'Select Language:',
                'lang-english': 'English',
                'lang-telugu': 'Telugu',

                // Main Content - Welcome
                'welcome-title': 'Welcome to the AI Tool Aggregator!',
                'welcome-description': 'Select an AI tool from the left sidebar to see its description and interact with its features. This platform helps you explore various AI capabilities in one place.',

                // Generic UI elements
                'enter-prompt': 'Enter your prompt:',
                'generate-button': 'Generate',
                'output-label': 'Output:',
                'output-placeholder': 'Your generated content will appear here.',
                'input-required': 'Please enter some input to generate content.',
                'error-occurred': 'An error occurred: ',
                'generating': 'Generating...',

                // Tool-specific texts
                'text-generation-description': 'Generate creative text formats like poems, code, scripts, musical pieces, email, letters, etc. based on your input.',
                'text-generation-placeholder': 'Write a short story about a brave knight and a dragon...',
                'generate-text-button': 'Generate Text',

                'image-generation-description': 'Create unique images from text descriptions. Describe what you want to see!',
                'image-generation-placeholder': 'A futuristic city at sunset, cyberpunk style, highly detailed',
                'generate-image-button': 'Generate Image',
                'refine-prompt-button': 'Refine Prompt ✨',
                'image-output-placeholder': 'Your generated image or refined prompt will appear here.',
                'image-prompt-required': 'Please enter an image prompt.',
                'prompt-refine-required': 'Please enter a prompt to refine.',
                'generating-image': 'Generating image...',
                'refining-prompt': 'Refining prompt...',
                'refined-prompt-label': 'Refined Prompt:',
                'generated-image-alt': 'Generated Image',
                'image-load-error': 'Image Load Error',

                'code-generation-description': 'Generate code snippets, functions, or entire scripts in various programming languages.',
                'code-generation-placeholder': 'Write a Python function to calculate the factorial of a number.',
                'generate-code-button': 'Generate Code',
                'explain-code-button': 'Explain Code ✨',
                'code-output-placeholder': 'Your generated code or explanation will appear here.',
                'code-prompt-required': 'Please enter a code prompt.',
                'code-explain-required': 'Please paste code to explain.',
                'generating-code': 'Generating code...',
                'explaining-code': 'Explaining code...',
                'code-explanation-label': 'Code Explanation:',

                'speech-to-text-description': 'Convert spoken language into written text. (Simulated microphone input)',
                'speech-to-text-placeholder': 'Type what you would say here...',
                'simulated-mic-input': 'Simulated Microphone Input:',
                'start-recording-button': 'Start Recording',
                'stop-recording-button': 'Stop Recording',
                'recording-message': 'Recording... Type your simulated speech above.',
                'transcription-output-label': 'Transcription Output:',
                'transcription-output-placeholder': 'Your transcribed speech will appear here.',
                'speech-input-required': 'Please type some simulated speech to transcribe.',
                'transcribing': 'Transcribing...',
                'transcribed-text-label': 'Transcribed text:',

                'text-to-speech-description': 'Convert written text into natural-sounding speech.',
                'text-to-speech-placeholder': 'Enter text to convert to speech: "The quick brown fox jumps over the lazy dog."',
                'generate-speech-button': 'Generate Speech',
                'speech-output-placeholder': 'Your generated speech content will appear here.',
                'speech-text-required': 'Please enter some text to convert to speech.',
                'generating-speech': 'Generating speech...',
                'suggest-tone-button': 'Suggest Tone ✨',
                'tone-suggestion-required': 'Please enter some text to suggest a tone.',
                'suggesting-tone': 'Suggesting tone...',
                'suggested-tone-label': 'Suggested Tone:',
                'audio-generated-message': 'Audio generated for: "{{text}}". (Playback not supported in this demo)',


                'data-analysis-description': 'Analyze datasets, identify patterns, and generate insights or summaries.',
                'data-analysis-placeholder': 'Analyze the following sales data: [100, 120, 90, 150, 110]. What are the trends?',
                'analyze-data-button': 'Analyze Data',
                'data-analysis-output-placeholder': 'Your data analysis will appear here.',
                'data-analysis-required': 'Please enter some data for analysis.',
                'analyzing-data': 'Analyzing data...',
                'analysis-result-label': 'Analysis result:',
                'generate-report-summary-button': 'Generate Report Summary ✨',
                'report-summary-required': 'Please enter some data to generate a report summary.',
                'generating-report-summary': 'Generating report summary...',
                'report-summary-label': 'Report Summary:',


                'translation-description': 'Translate text from one language to another.',
                'translation-placeholder': 'Translate "Hello, how are you?" to Spanish.',
                'translate-text-button': 'Translate Text',
                'translation-output-placeholder': 'Your translation will appear here.',
                'translation-text-required': 'Please enter some text to translate.',
                'translating': 'Translating...',
                'translation-label': 'Translation:',
                'detect-language-button': 'Detect Language ✨',
                'language-detection-required': 'Please enter some text to detect language.',
                'detecting-language': 'Detecting language...',
                'detected-language-label': 'Detected Language:',

                'summarization-description': 'Condense long texts into concise summaries.',
                'summarization-placeholder': 'Summarize the following article: [Paste a long article text here]',
                'summarize-text-button': 'Summarize Text',
                'summary-output-placeholder': 'Your summary will appear here.',
                'summarization-text-required': 'Please enter some text to summarize.',
                'summarizing': 'Summarizing...',
                'summary-label': 'Summary:',
                'extract-keywords-button': 'Extract Keywords ✨',
                'keywords-extraction-required': 'Please enter some text to extract keywords.',
                'extracting-keywords': 'Extracting keywords...',
                'keywords-label': 'Keywords:',

                'chatbot-description': 'Engage in conversational interactions with an AI assistant.',
                'chatbot-placeholder': 'Ask me anything...',
                'chat-with-ai-label': 'Chat with the AI:',
                'send-message-button': 'Send Message',
                'chatbot-output-placeholder': 'The chatbot\'s response will appear here.',
                'chatbot-message-required': 'Please enter a message for the chatbot.',
                'thinking': 'Thinking...',
                'chatbot-response-label': 'Chatbot response:',
                'summarize-conversation-button': 'Summarize Conversation ✨',
                'conversation-summary-required': 'Please enter some text to summarize the conversation.',
                'summarizing-conversation': 'Summarizing conversation...',
                'conversation-summary-label': 'Conversation Summary:',

                'object-detection-description': 'Identify and localize objects within images or video streams.',
                'object-detection-placeholder': 'This tool would typically involve image upload. For now, imagine you\'re uploading an image of a cat and a dog.',
                'describe-image-label': 'Describe the image for object detection:',
                'detect-objects-button': 'Detect Objects',
                'object-detection-output-placeholder': 'Detected objects will appear here.',
                'object-detection-required': 'Please describe an image for object detection.',
                'detecting-objects': 'Detecting objects...',
                'detected-objects-label': 'Detected objects:',
                'image-captioning-button': 'Image Captioning ✨',
                'image-captioning-required': 'Please describe an image to generate a caption.',
                'generating-image-caption': 'Generating image caption...',
                'image-caption-label': 'Image Caption:',

                'idea-brainstormer-description': 'Generate creative ideas, solutions, or concepts based on a given topic or problem using AI power.',
                'idea-brainstormer-placeholder': 'Suggest ideas for a new mobile app that helps with daily productivity.',
                'enter-topic-label': 'Enter a topic or problem to brainstorm ideas for:',
                'brainstorm-ideas-button': 'Brainstorm Ideas ✨',
                'brainstorm-output-placeholder': 'Your brainstormed ideas will appear here.',
                'brainstorm-topic-required': 'Please enter a topic to brainstorm.',
                'brainstorming': 'Brainstorming...',
                'brainstormed-ideas-label': 'Brainstormed Ideas:',

                // Error messages from API functions
                'error-text-generation': 'Error: Could not generate text. Please try again.',
                'error-text-generation-connect': 'Error: Failed to connect to the text generation service.',
                'error-image-generation': 'Error: Could not generate image. Please try again.',
                'error-image-generation-connect': 'Error: Failed to connect to the image generation service.',
                'error-refine-prompt': 'Error: Could not refine prompt. Please try again.',
                'error-refine-prompt-connect': 'Error: Failed to connect to the prompt refinement service.',
                'error-code-generation': 'Error: Could not generate code. Please try again.',
                'error-code-generation-connect': 'Error: Failed to connect to the code generation service.',
                'error-explain-code': 'Error: Could not explain code. Please try again.',
                'error-explain-code-connect': 'Error: Failed to connect to the code explanation service.',
                'error-api-unexpected': 'Error: API response was unexpected or empty. Check console for details. Response:',
                'error-speech-to-text-connect': 'Error: Failed to connect to the speech-to-text service. Please check your network and try again. Details:',
                'error-text-to-speech': 'Error: Could not convert text to speech. Please try again.',
                'error-text-to-speech-connect': 'Error: Failed to connect to the text-to-speech service.',
                'error-data-analysis': 'Error: Could not perform data analysis. Please try again.',
                'error-data-analysis-connect': 'Error: Failed to connect to the data analysis service.',
                'error-report-summary': 'Error: Could not generate report summary. Please try again.',
                'error-report-summary-connect': 'Error: Failed to connect to the report summary service.',
                'error-translation': 'Error: Could not translate text. Please try again.',
                'error-translation-connect': 'Error: Failed to connect to the translation service.',
                'error-detect-language': 'Error: Could not detect language. Please try again.',
                'error-detect-language-connect': 'Error: Failed to connect to the language detection service.',
                'error-summarization': 'Error: Could not summarize text. Please try again.',
                'error-summarization-connect': 'Error: Failed to connect to the summarization service.',
                'error-extract-keywords': 'Error: Could not extract keywords. Please try again.',
                'error-extract-keywords-connect': 'Error: Failed to connect to the keyword extraction service.',
                'error-chatbot': 'Error: Could not get chatbot response. Please try again.',
                'error-chatbot-connect': 'Error: Failed to connect to the chatbot service.',
                'error-conversation-summary': 'Error: Could not generate conversation summary. Please try again.',
                'error-conversation-summary-connect': 'Error: Failed to connect to the conversation summary service.',
                'error-object-detection': 'Error: Could not perform object detection. Please try again.',
                'error-object-detection-connect': 'Error: Failed to connect to the object detection service.',
                'error-image-captioning': 'Error: Could not generate image caption. Please try again.',
                'error-image-captioning-connect': 'Error: Failed to connect to the image captioning service.',
                'error-idea-brainstorming': 'Error: Could not brainstorm ideas. Please try again.',
                'error-idea-brainstorming-connect': 'Error: Failed to connect to the idea brainstorming service.',
                'tool-not-found': 'Tool Not Found',
                'select-valid-tool': 'Please select a valid AI tool from the sidebar.'
            },
            te: {
                // Sidebar
                'sidebar-title': 'AI టూల్స్',
                'text-generation-category': 'టెక్స్ట్ జనరేషన్',
                'image-generation-category': 'ఇమేజ్ జనరేషన్',
                'code-generation-category': 'కోడ్ జనరేషన్',
                'speech-to-text-category': 'స్పీచ్-టు-టెక్స్ట్',
                'text-to-speech-category': 'టెక్స్ట్-టు-స్పీచ్',
                'data-analysis-category': 'డేటా అనాలిసిస్',
                'translation-category': 'ట్రాన్స్‌లేషన్',
                'summarization-category': 'సమ్మరైజేషన్',
                'chatbot-category': 'చాట్‌బాట్',
                'object-detection-category': 'ఆబ్జెక్ట్ డిటెక్షన్',
                'idea-brainstormer-category': 'ఐడియా బ్రెయిన్‌స్టార్మర్ ✨',

                // Language Selector
                'select-language': 'భాషను ఎంచుకోండి:',
                'lang-english': 'ఇంగ్లీష్',
                'lang-telugu': 'తెలుగు',

                // Main Content - Welcome
                'welcome-title': 'AI టూల్ అగ్రిగేటర్‌కు స్వాగతం!',
                'welcome-description': 'దాని వివరణను చూడటానికి మరియు దాని ఫీచర్లతో ఇంటరాక్ట్ అవ్వడానికి ఎడమ సైడ్‌బార్ నుండి AI టూల్‌ను ఎంచుకోండి. ఈ ప్లాట్‌ఫారమ్ వివిధ AI సామర్థ్యాలను ఒకే చోట అన్వేషించడానికి మీకు సహాయపడుతుంది.',

                // Generic UI elements
                'enter-prompt': 'మీ ప్రాంప్ట్‌ను నమోదు చేయండి:',
                'generate-button': 'జనరేట్ చేయండి',
                'output-label': 'అవుట్‌పుట్:',
                'output-placeholder': 'మీరు రూపొందించిన కంటెంట్ ఇక్కడ కనిపిస్తుంది.',
                'input-required': 'కంటెంట్‌ను రూపొందించడానికి దయచేసి కొంత ఇన్‌పుట్‌ను నమోదు చేయండి.',
                'error-occurred': 'ఒక లోపం సంభవించింది: ',
                'generating': 'జనరేట్ అవుతోంది...',

                // Tool-specific texts
                'text-generation-description': 'మీ ఇన్‌పుట్ ఆధారంగా కవితలు, కోడ్, స్క్రిప్ట్‌లు, సంగీత భాగాలు, ఇమెయిల్, లేఖలు మొదలైన సృజనాత్మక టెక్స్ట్ ఫార్మాట్‌లను రూపొందించండి.',
                'text-generation-placeholder': 'ఒక ధైర్యవంతుడైన నైట్ మరియు డ్రాగన్ గురించి ఒక చిన్న కథ రాయండి...',
                'generate-text-button': 'టెక్స్ట్ జనరేట్ చేయండి',

                'image-generation-description': 'టెక్స్ట్ వివరణల నుండి ప్రత్యేకమైన చిత్రాలను సృష్టించండి. మీరు ఏమి చూడాలనుకుంటున్నారో వివరించండి!',
                'image-generation-placeholder': 'సూర్యాస్తమయం సమయంలో ఒక భవిష్యత్ నగరం, సైబర్‌పంక్ స్టైల్, అత్యంత వివరంగా',
                'generate-image-button': 'చిత్రాన్ని జనరేట్ చేయండి',
                'refine-prompt-button': 'ప్రాంప్ట్‌ను మెరుగుపరచండి ✨',
                'image-output-placeholder': 'మీరు రూపొందించిన చిత్రం లేదా మెరుగుపరచబడిన ప్రాంప్ట్ ఇక్కడ కనిపిస్తుంది.',
                'image-prompt-required': 'దయచేసి చిత్ర ప్రాంప్ట్‌ను నమోదు చేయండి.',
                'prompt-refine-required': 'మెరుగుపరచడానికి దయచేసి ఒక ప్రాంప్ట్‌ను నమోదు చేయండి.',
                'generating-image': 'చిత్రం జనరేట్ అవుతోంది...',
                'refining-prompt': 'ప్రాంప్ట్ మెరుగుపరచబడుతోంది...',
                'refined-prompt-label': 'మెరుగుపరచబడిన ప్రాంప్ట్:',
                'generated-image-alt': 'జనరేట్ చేయబడిన చిత్రం',
                'image-load-error': 'చిత్రం లోడ్ లోపం',

                'code-generation-description': 'వివిధ ప్రోగ్రామింగ్ భాషలలో కోడ్ స్నిప్పెట్‌లు, ఫంక్షన్‌లు లేదా మొత్తం స్క్రిప్ట్‌లను రూపొందించండి.',
                'code-generation-placeholder': 'ఒక సంఖ్య యొక్క ఫ్యాక్టోరియల్‌ను లెక్కించడానికి పైథాన్ ఫంక్షన్‌ను రాయండి.',
                'generate-code-button': 'కోడ్‌ను జనరేట్ చేయండి',
                'explain-code-button': 'కోడ్‌ను వివరించండి ✨',
                'code-output-placeholder': 'మీరు రూపొందించిన కోడ్ లేదా వివరణ ఇక్కడ కనిపిస్తుంది.',
                'code-prompt-required': 'దయచేసి కోడ్ ప్రాంప్ట్‌ను నమోదు చేయండి.',
                'code-explain-required': 'దయచేసి వివరించడానికి కోడ్‌ను అతికించండి.',
                'generating-code': 'కోడ్ జనరేట్ అవుతోంది...',
                'explaining-code': 'కోడ్ వివరించబడుతోంది...',
                'code-explanation-label': 'కోడ్ వివరణ:',

                'speech-to-text-description': 'మాట్లాడే భాషను వ్రాతపూర్వక వచనంగా మార్చండి. (సిమ్యులేటెడ్ మైక్రోఫోన్ ఇన్‌పుట్)',
                'speech-to-text-placeholder': 'మీరు ఇక్కడ ఏమి చెబుతారో టైప్ చేయండి...',
                'simulated-mic-input': 'సిమ్యులేటెడ్ మైక్రోఫోన్ ఇన్‌పుట్:',
                'start-recording-button': 'రికార్డింగ్ ప్రారంభించండి',
                'stop-recording-button': 'రికార్డింగ్ ఆపండి',
                'recording-message': 'రికార్డింగ్ అవుతోంది... పైన మీ సిమ్యులేటెడ్ ప్రసంగాన్ని టైప్ చేయండి.',
                'transcription-output-label': 'ట్రాన్స్‌క్రిప్షన్ అవుట్‌పుట్:',
                'transcription-output-placeholder': 'మీ ట్రాన్స్‌క్రైబ్ చేయబడిన ప్రసంగం ఇక్కడ కనిపిస్తుంది.',
                'speech-input-required': 'ట్రాన్స్‌క్రైబ్ చేయడానికి దయచేసి కొంత సిమ్యులేటెడ్ ప్రసంగాన్ని టైప్ చేయండి.',
                'transcribing': 'ట్రాన్స్‌క్రైబ్ అవుతోంది...',
                'transcribed-text-label': 'ట్రాన్స్‌క్రైబ్ చేయబడిన టెక్స్ట్:',

                'text-to-speech-description': 'వ్రాతపూర్వక వచనాన్ని సహజంగా వినిపించే ప్రసంగంగా మార్చండి.',
                'text-to-speech-placeholder': 'ప్రసంగంగా మార్చడానికి వచనాన్ని నమోదు చేయండి: "వేగవంతమైన గోధుమ నక్క సోమరి కుక్కపైకి దూకుతుంది."',
                'generate-speech-button': 'జనరేట్ చేయండి',
                'speech-output-placeholder': 'మీరు రూపొందించిన ప్రసంగ కంటెంట్ ఇక్కడ కనిపిస్తుంది.',
                'speech-text-required': 'ప్రసంగంగా మార్చడానికి దయచేసి కొంత వచనాన్ని నమోదు చేయండి.',
                'generating-speech': 'ప్రసంగం జనరేట్ అవుతోంది...',
                'suggest-tone-button': 'టోన్‌ను సూచించండి ✨',
                'tone-suggestion-required': 'టోన్‌ను సూచించడానికి దయచేసి కొంత వచనాన్ని నమోదు చేయండి.',
                'suggesting-tone': 'టోన్ సూచించబడుతోంది...',
                'suggested-tone-label': 'సూచించిన టోన్:',
                'audio-generated-message': 'ఆడియో దీని కోసం జనరేట్ చేయబడింది: "{{text}}". (ఈ డెమోలో ప్లేబ్యాక్ మద్దతు లేదు)',


                'data-analysis-description': 'డేటాసెట్‌లను విశ్లేషించండి, నమూనాలను గుర్తించండి మరియు అంతర్దృష్టులు లేదా సారాంశాలను రూపొందించండి.',
                'data-analysis-placeholder': 'కింది విక్రయాల డేటాను విశ్లేషించండి: [100, 120, 90, 150, 110]. ట్రెండ్‌లు ఏమిటి?',
                'analyze-data-button': 'డేటాను విశ్లేషించండి',
                'data-analysis-output-placeholder': 'మీ డేటా విశ్లేషణ ఇక్కడ కనిపిస్తుంది.',
                'data-analysis-required': 'విశ్లేషణ కోసం దయచేసి కొంత డేటాను నమోదు చేయండి.',
                'analyzing-data': 'డేటా విశ్లేషించబడుతోంది...',
                'analysis-result-label': 'విశ్లేషణ ఫలితం:',
                'generate-report-summary-button': 'రిపోర్ట్ సారాంశాన్ని జనరేట్ చేయండి ✨',
                'report-summary-required': 'రిపోర్ట్ సారాంశాన్ని రూపొందించడానికి దయచేసి కొంత డేటాను నమోదు చేయండి.',
                'generating-report-summary': 'రిపోర్ట్ సారాంశం జనరేట్ అవుతోంది...',
                'report-summary-label': 'రిపోర్ట్ సారాంశం:',


                'translation-description': 'ఒక భాష నుండి మరొక భాషలోకి వచనాన్ని అనువదించండి.',
                'translation-placeholder': '"హలో, మీరు ఎలా ఉన్నారు?" అని స్పానిష్‌లోకి అనువదించండి.',
                'translate-text-button': 'వచనాన్ని అనువదించండి',
                'translation-output-placeholder': 'మీ అనువాదం ఇక్కడ కనిపిస్తుంది.',
                'translation-text-required': 'అనువదించడానికి దయచేసి కొంత వచనాన్ని నమోదు చేయండి.',
                'translating': 'అనువదించబడుతోంది...',
                'translation-label': 'అనువాదం:',
                'detect-language-button': 'భాషను గుర్తించండి ✨',
                'language-detection-required': 'భాషను గుర్తించడానికి దయచేసి కొంత వచనాన్ని నమోదు చేయండి.',
                'detecting-language': 'భాష గుర్తించబడుతోంది...',
                'detected-language-label': 'గుర్తించబడిన భాష:',

                'summarization-description': 'పొడవైన వచనాలను సంక్షిప్త సారాంశాలుగా కుదించండి.',
                'summarization-placeholder': 'కింది కథనాన్ని సంగ్రహించండి: [ఇక్కడ ఒక పొడవైన కథన వచనాన్ని అతికించండి]',
                'summarize-text-button': 'వచనాన్ని సంగ్రహించండి',
                'summary-output-placeholder': 'మీ సారాంశం ఇక్కడ కనిపిస్తుంది.',
                'summarization-text-required': 'సంగ్రహించడానికి దయచేసి కొంత వచనాన్ని నమోదు చేయండి.',
                'summarizing': 'సంగ్రహించబడుతోంది...',
                'summary-label': 'సారాంశం:',
                'extract-keywords-button': 'కీలక పదాలను సంగ్రహించండి ✨',
                'keywords-extraction-required': 'కీలక పదాలను సంగ్రహించడానికి దయచేసి కొంత వచనాన్ని నమోదు చేయండి.',
                'extracting-keywords': 'కీలక పదాలు సంగ్రహించబడుతున్నాయి...',
                'keywords-label': 'కీలక పదాలు:',

                'chatbot-description': 'AI అసిస్టెంట్‌తో సంభాషణాత్మక పరస్పర చర్యలలో పాల్గొనండి.',
                'chatbot-placeholder': 'నన్ను ఏదైనా అడగండి...',
                'chat-with-ai-label': 'AIతో చాట్ చేయండి:',
                'send-message-button': 'సందేశాన్ని పంపండి',
                'chatbot-output-placeholder': 'చాట్‌బాట్ యొక్క ప్రతిస్పందన ఇక్కడ కనిపిస్తుంది.',
                'chatbot-message-required': 'చాట్‌బాట్ కోసం దయచేసి ఒక సందేశాన్ని నమోదు చేయండి.',
                'thinking': 'ఆలోచిస్తోంది...',
                'chatbot-response-label': 'చాట్‌బాట్ ప్రతిస్పందన:',
                'summarize-conversation-button': 'సంభాషణను సంగ్రహించండి ✨',
                'conversation-summary-required': 'సంభాషణను సంగ్రహించడానికి దయచేసి కొంత వచనాన్ని నమోదు చేయండి.',
                'summarizing-conversation': 'సంభాషణ సంగ్రహించబడుతోంది...',
                'conversation-summary-label': 'సంభాషణ సారాంశం:',

                'object-detection-description': 'చిత్రాలు లేదా వీడియో స్ట్రీమ్‌లలోని వస్తువులను గుర్తించండి మరియు స్థానికీకరించండి.',
                'object-detection-placeholder': 'ఈ సాధనం సాధారణంగా చిత్ర అప్‌లోడ్‌ను కలిగి ఉంటుంది. ప్రస్తుతానికి, మీరు పిల్లి మరియు కుక్క యొక్క చిత్రాన్ని అప్‌లోడ్ చేస్తున్నారని ఊహించుకోండి.',
                'describe-image-label': 'వస్తువులను గుర్తించడానికి చిత్రాన్ని వివరించండి:',
                'detect-objects-button': 'వస్తువులను గుర్తించండి',
                'object-detection-output-placeholder': 'గుర్తించబడిన వస్తువులు ఇక్కడ కనిపిస్తాయి.',
                'object-detection-required': 'వస్తువులను గుర్తించడానికి దయచేసి చిత్రాన్ని వివరించండి.',
                'detecting-objects': 'వస్తువులు గుర్తించబడుతున్నాయి...',
                'detected-objects-label': 'గుర్తించబడిన వస్తువులు:',
                'image-captioning-button': 'చిత్ర క్యాప్షనింగ్ ✨',
                'image-captioning-required': 'క్యాప్షన్‌ను రూపొందించడానికి దయచేసి చిత్రాన్ని వివరించండి.',
                'generating-image-caption': 'చిత్ర క్యాప్షన్ జనరేట్ అవుతోంది...',
                'image-caption-label': 'చిత్ర క్యాప్షన్:',

                'idea-brainstormer-description': 'AI శక్తిని ఉపయోగించి ఒక నిర్దిష్ట అంశం లేదా సమస్య ఆధారంగా సృజనాత్మక ఆలోచనలు, పరిష్కారాలు లేదా కాన్సెప్ట్‌లను రూపొందించండి.',
                'idea-brainstormer-placeholder': 'రోజువారీ ఉత్పాదకతకు సహాయపడే కొత్త మొబైల్ అనువర్తనం కోసం ఆలోచనలను సూచించండి.',
                'enter-topic-label': 'ఆలోచనలను బ్రెయిన్‌స్టార్మ్ చేయడానికి ఒక అంశం లేదా సమస్యను నమోదు చేయండి:',
                'brainstorm-ideas-button': 'ఆలోచనలను బ్రెయిన్‌స్టార్మ్ చేయండి ✨',
                'brainstorm-output-placeholder': 'మీ బ్రెయిన్‌స్టార్మ్ చేయబడిన ఆలోచనలు ఇక్కడ కనిపిస్తాయి.',
                'brainstorm-topic-required': 'బ్రెయిన్‌స్టార్మ్ చేయడానికి దయచేసి ఒక అంశాన్ని నమోదు చేయండి.',
                'brainstorming': 'బ్రెయిన్‌స్టార్మ్ అవుతోంది...',
                'brainstormed-ideas-label': 'బ్రెయిన్‌స్టార్మ్ చేయబడిన ఆలోచనలు:',

                // Error messages from API functions
                'error-text-generation': 'లోపం: టెక్స్ట్ జనరేట్ చేయలేకపోయాము. దయచేసి మళ్లీ ప్రయత్నించండి.',
                'error-text-generation-connect': 'లోపం: టెక్స్ట్ జనరేషన్ సేవకు కనెక్ట్ కాలేదు.',
                'error-image-generation': 'లోపం: చిత్రాన్ని జనరేట్ చేయలేకపోయాము. దయచేసి మళ్లీ ప్రయత్నించండి.',
                'error-image-generation-connect': 'లోపం: ఇమేజ్ జనరేషన్ సేవకు కనెక్ట్ కాలేదు.',
                'error-refine-prompt': 'లోపం: ప్రాంప్ట్‌ను మెరుగుపరచలేకపోయాము. దయచేసి మళ్లీ ప్రయత్నించండి.',
                'error-refine-prompt-connect': 'లోపం: ప్రాంప్ట్ మెరుగుదల సేవకు కనెక్ట్ కాలేదు.',
                'error-code-generation': 'లోపం: కోడ్‌ను జనరేట్ చేయలేకపోయాము. దయచేసి మళ్లీ ప్రయత్నించండి.',
                'error-code-generation-connect': 'లోపం: కోడ్ జనరేషన్ సేవకు కనెక్ట్ కాలేదు.',
                'error-explain-code': 'లోపం: కోడ్‌ను వివరించలేకపోయాము. దయచేసి మళ్లీ ప్రయత్నించండి.',
                'error-explain-code-connect': 'లోపం: కోడ్ వివరణ సేవకు కనెక్ట్ కాలేదు.',
                'error-api-unexpected': 'లోపం: API ప్రతిస్పందన ఊహించనిది లేదా ఖాళీగా ఉంది. వివరాల కోసం కన్సోల్‌ను తనిఖీ చేయండి. ప్రతిస్పందన:',
                'error-speech-to-text-connect': 'లోపం: స్పీచ్-టు-టెక్స్ట్ సేవకు కనెక్ట్ కాలేదు. దయచేసి మీ నెట్‌వర్క్‌ను తనిఖీ చేసి మళ్లీ ప్రయత్నించండి. వివరాలు:',
                'error-text-to-speech': 'లోపం: వచనాన్ని ప్రసంగంగా మార్చలేకపోయాము. దయచేసి మళ్లీ ప్రయత్నించండి.',
                'error-text-to-speech-connect': 'లోపం: టెక్స్ట్-టు-స్పీచ్ సేవకు కనెక్ట్ కాలేదు.',
                'error-data-analysis': 'లోపం: డేటా విశ్లేషణను చేయలేకపోయాము. దయచేసి మళ్లీ ప్రయత్నించండి.',
                'error-data-analysis-connect': 'లోపం: డేటా విశ్లేషణ సేవకు కనెక్ట్ కాలేదు.',
                'error-report-summary': 'లోపం: నివేదిక సారాంశాన్ని రూపొందించలేకపోయాము. దయచేసి మళ్లీ ప్రయత్నించండి.',
                'error-report-summary-connect': 'లోపం: నివేదిక సారాంశం సేవకు కనెక్ట్ కాలేదు.',
                'error-translation': 'లోపం: వచనాన్ని అనువదించలేకపోయాము. దయచేసి మళ్లీ ప్రయత్నించండి.',
                'error-translation-connect': 'లోపం: అనువాద సేవకు కనెక్ట్ కాలేదు.',
                'error-detect-language': 'లోపం: భాషను గుర్తించలేకపోయాము. దయచేసి మళ్లీ ప్రయత్నించండి.',
                'error-detect-language-connect': 'లోపం: భాష గుర్తింపు సేవకు కనెక్ట్ కాలేదు.',
                'error-summarization': 'లోపం: వచనాన్ని సంగ్రహించలేకపోయాము. దయచేసి మళ్లీ ప్రయత్నించండి.',
                'error-summarization-connect': 'లోపం: సారాంశం సేవకు కనెక్ట్ కాలేదు.',
                'error-extract-keywords': 'లోపం: కీలక పదాలను సంగ్రహించలేకపోయాము. దయచేసి మళ్లీ ప్రయత్నించండి.',
                'error-extract-keywords-connect': 'లోపం: కీలక పదాల సంగ్రహణ సేవకు కనెక్ట్ కాలేదు.',
                'error-chatbot': 'లోపం: చాట్‌బాట్ ప్రతిస్పందనను పొందలేకపోయాము. దయచేసి మళ్లీ ప్రయత్నించండి.',
                'error-chatbot-connect': 'లోపం: చాట్‌బాట్ సేవకు కనెక్ట్ కాలేదు.',
                'error-conversation-summary': 'లోపం: సంభాషణ సారాంశాన్ని రూపొందించలేకపోయాము. దయచేసి మళ్లీ ప్రయత్నించండి.',
                'error-conversation-summary-connect': 'లోపం: సంభాషణ సారాంశం సేవకు కనెక్ట్ కాలేదు.',
                'error-object-detection': 'లోపం: వస్తువులను గుర్తించలేకపోయాము. దయచేసి మళ్లీ ప్రయత్నించండి.',
                'error-object-detection-connect': 'లోపం: వస్తువుల గుర్తింపు సేవకు కనెక్ట్ కాలేదు.',
                'error-image-captioning': 'లోపం: చిత్ర క్యాప్షన్‌ను రూపొందించలేకపోయాము. దయచేసి మళ్లీ ప్రయత్నించండి.',
                'error-image-captioning-connect': 'లోపం: చిత్ర క్యాప్షనింగ్ సేవకు కనెక్ట్ కాలేదు.',
                'error-idea-brainstorming': 'లోపం: ఆలోచనలను బ్రెయిన్‌స్టార్మ్ చేయలేకపోయాము. దయచేసి మళ్లీ ప్రయత్నించండి.',
                'error-idea-brainstorming-connect': 'లోపం: ఆలోచనలను బ్రెయిన్‌స్టార్మింగ్ సేవకు కనెక్ట్ కాలేదు.',
                'tool-not-found': 'టూల్ కనుగొనబడలేదు',
                'select-valid-tool': 'దయచేసి సైడ్‌బార్ నుండి చెల్లుబాటు అయ్యే AI టూల్‌ను ఎంచుకోండి.'
            }
        };

        // Current language (default to English)
        let currentLang = 'en';

        // Function to apply translations
        function applyTranslations() {
            document.querySelectorAll('[data-lang-key]').forEach(element => {
                const key = element.getAttribute('data-lang-key');
                if (translations[currentLang] && translations[currentLang][key]) {
                    if (element.tagName === 'INPUT' && element.hasAttribute('placeholder')) {
                        element.setAttribute('placeholder', translations[currentLang][key]);
                    } else {
                        element.textContent = translations[currentLang][key];
                    }
                }
            });

            // Update placeholder for output areas if they exist
            const outputPlaceholder = document.getElementById('output-placeholder');
            if (outputPlaceholder) {
                outputPlaceholder.textContent = translations[currentLang]['output-placeholder'];
            }
            const imageOutputPlaceholder = document.getElementById('image-output-placeholder');
            if (imageOutputPlaceholder) {
                imageOutputPlaceholder.textContent = translations[currentLang]['image-output-placeholder'];
            }
            const codeOutputPlaceholder = document.getElementById('code-output-placeholder');
            if (codeOutputPlaceholder) {
                codeOutputPlaceholder.textContent = translations[currentLang]['code-output-placeholder'];
            }
            const transcriptionOutputPlaceholder = document.getElementById('transcription-output-placeholder');
            if (transcriptionOutputPlaceholder) {
                transcriptionOutputPlaceholder.textContent = translations[currentLang]['transcription-output-placeholder'];
            }
            const speechOutputPlaceholder = document.getElementById('speech-output-placeholder');
            if (speechOutputPlaceholder) {
                speechOutputPlaceholder.textContent = translations[currentLang]['speech-output-placeholder'];
            }
            const dataAnalysisOutputPlaceholder = document.getElementById('data-analysis-output-placeholder');
            if (dataAnalysisOutputPlaceholder) {
                dataAnalysisOutputPlaceholder.textContent = translations[currentLang]['data-analysis-output-placeholder'];
            }
            const translationOutputPlaceholder = document.getElementById('translation-output-placeholder');
            if (translationOutputPlaceholder) {
                translationOutputPlaceholder.textContent = translations[currentLang]['translation-output-placeholder'];
            }
            const summaryOutputPlaceholder = document.getElementById('summary-output-placeholder');
            if (summaryOutputPlaceholder) {
                summaryOutputPlaceholder.textContent = translations[currentLang]['summary-output-placeholder'];
            }
            const chatbotOutputPlaceholder = document.getElementById('chatbot-output-placeholder');
            if (chatbotOutputPlaceholder) {
                chatbotOutputPlaceholder.textContent = translations[currentLang]['chatbot-output-placeholder'];
            }
            const objectDetectionOutputPlaceholder = document.getElementById('object-detection-output-placeholder');
            if (objectDetectionOutputPlaceholder) {
                objectDetectionOutputPlaceholder.textContent = translations[currentLang]['object-detection-output-placeholder'];
            }
            const brainstormOutputPlaceholder = document.getElementById('brainstorm-output-placeholder');
            if (brainstormOutputPlaceholder) {
                brainstormOutputPlaceholder.textContent = translations[currentLang]['brainstorm-output-placeholder'];
            }
        }

        // Event listener for language select
        document.getElementById('language-select').addEventListener('change', (event) => {
            currentLang = event.target.value;
            applyTranslations();
            // Re-render the current tool to apply new translations to dynamic content
            if (currentActiveCategory) {
                renderTool(currentActiveCategory);
            }
        });


        // Tool Definitions
        const tools = {
            'text-generation': {
                titleKey: 'text-generation-category',
                descriptionKey: 'text-generation-description',
                render: function() {
                    return `
                        <div class="flex-grow flex flex-col justify-between">
                            <div>
                                <label for="text-gen-prompt" class="block text-gray-300 text-sm font-bold mb-2" data-lang-key="enter-prompt"></label>
                                <textarea id="text-gen-prompt" class="shadow appearance-none border border-[#444] rounded w-full py-3 px-4 text-white bg-[#333] leading-tight focus:outline-none focus:shadow-outline h-32 mb-4 resize-y" placeholder="${translations[currentLang]['text-generation-placeholder']}"></textarea>
                                <button id="generate-text-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition-colors duration-200" data-lang-key="generate-text-button"></button>
                            </div>
                            <div class="mt-8 flex-grow flex flex-col">
                                <label class="block text-gray-300 text-sm font-bold mb-2" data-lang-key="output-label"></label>
                                <div id="text-gen-output" class="shadow appearance-none border border-[#444] rounded w-full py-3 px-4 text-gray-300 bg-[#333] leading-tight focus:outline-none focus:shadow-outline flex-grow overflow-y-auto whitespace-pre-wrap" data-lang-key="output-placeholder"></div>
                            </div>
                        </div>
                    `;
                },
                init: function() {
                    const generateBtn = document.getElementById('generate-text-btn');
                    const promptInput = document.getElementById('text-gen-prompt');
                    const outputDiv = document.getElementById('text-gen-output');

                    generateBtn.onclick = async () => {
                        const prompt = promptInput.value.trim();
                        if (!prompt) {
                            alert(translations[currentLang]['input-required']);
                            return;
                        }

                        generateBtn.disabled = true;
                        outputDiv.textContent = translations[currentLang]['generating'];
                        try {
                            const result = await callBackend('text_generation', prompt);
                            outputDiv.textContent = result;
                        } catch (error) {
                            console.error('Error generating text:', error);
                            outputDiv.textContent = `${translations[currentLang]['error-occurred']}${error.message || translations[currentLang]['error-text-generation']}`;
                        } finally {
                            generateBtn.disabled = false;
                        }
                    };
                }
            },
            'image-generation': {
                titleKey: 'image-generation-category',
                descriptionKey: 'image-generation-description',
                render: function() {
                    return `
                        <div class="flex-grow flex flex-col justify-between">
                            <div>
                                <label for="image-gen-prompt" class="block text-gray-300 text-sm font-bold mb-2" data-lang-key="enter-prompt"></label>
                                <textarea id="image-gen-prompt" class="shadow appearance-none border border-[#444] rounded w-full py-3 px-4 text-white bg-[#333] leading-tight focus:outline-none focus:shadow-outline h-24 mb-4 resize-y" placeholder="${translations[currentLang]['image-generation-placeholder']}"></textarea>
                                <button id="generate-image-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition-colors duration-200 mr-2" data-lang-key="generate-image-button"></button>
                                <button id="refine-prompt-btn" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition-colors duration-200" data-lang-key="refine-prompt-button"></button>
                            </div>
                            <div class="mt-8 flex-grow flex flex-col">
                                <label class="block text-gray-300 text-sm font-bold mb-2" data-lang-key="output-label"></label>
                                <div id="image-gen-output" class="shadow appearance-none border border-[#444] rounded w-full py-3 px-4 text-gray-300 bg-[#333] leading-tight focus:outline-none focus:shadow-outline flex-grow overflow-y-auto flex items-center justify-center p-4">
                                    <span data-lang-key="image-output-placeholder"></span>
                                </div>
                            </div>
                        </div>
                    `;
                },
                init: function() {
                    const generateBtn = document.getElementById('generate-image-btn');
                    const refineBtn = document.getElementById('refine-prompt-btn');
                    const promptInput = document.getElementById('image-gen-prompt');
                    const outputDiv = document.getElementById('image-gen-output');

                    generateBtn.onclick = async () => {
                        const prompt = promptInput.value.trim();
                        if (!prompt) {
                            alert(translations[currentLang]['image-prompt-required']);
                            return;
                        }

                        generateBtn.disabled = true;
                        refineBtn.disabled = true;
                        outputDiv.innerHTML = `<span class="text-gray-500" data-lang-key="generating-image">${translations[currentLang]['generating-image']}</span>`;
                        try {
                            const result = await callBackend('image_generation', prompt);
                            if (result && result.startsWith('data:image')) {
                                outputDiv.innerHTML = `<img src="${result}" alt="${translations[currentLang]['generated-image-alt']}" class="max-w-full h-auto object-contain">`;
                            } else {
                                throw new Error(translations[currentLang]['error-image-generation']);
                            }
                        } catch (error) {
                            console.error('Error generating image:', error);
                            outputDiv.innerHTML = `<span class="text-red-400">${translations[currentLang]['error-occurred']}${error.message || translations[currentLang]['error-image-generation']}</span>`;
                        } finally {
                            generateBtn.disabled = false;
                            refineBtn.disabled = false;
                        }
                    };

                    refineBtn.onclick = async () => {
                        const prompt = promptInput.value.trim();
                        if (!prompt) {
                            alert(translations[currentLang]['prompt-refine-required']);
                            return;
                        }

                        generateBtn.disabled = true;
                        refineBtn.disabled = true;
                        outputDiv.innerHTML = `<span class="text-gray-500" data-lang-key="refining-prompt">${translations[currentLang]['refining-prompt']}</span>`;
                        try {
                            // Using text_generation tool to refine prompt
                            const result = await callBackend('text_generation', `Refine the following image generation prompt to be more detailed and creative (respond only with the refined prompt, no extra text): "${prompt}"`);
                            if (result) {
                                outputDiv.innerHTML = `<p class="text-gray-300"><strong data-lang-key="refined-prompt-label">${translations[currentLang]['refined-prompt-label']}</strong> ${result}</p>`;
                            } else {
                                throw new Error(translations[currentLang]['error-refine-prompt']);
                            }
                        } catch (error) {
                            console.error('Error refining prompt:', error);
                            outputDiv.innerHTML = `<span class="text-red-400">${translations[currentLang]['error-occurred']}${error.message || translations[currentLang]['error-refine-prompt']}</span>`;
                        } finally {
                            generateBtn.disabled = false;
                            refineBtn.disabled = false;
                        }
                    };
                }
            },
            // Placeholder for other tools - add similar structures
            'code-generation': {
                titleKey: 'code-generation-category',
                descriptionKey: 'code-generation-description',
                render: function() {
                    return `
                        <div class="flex-grow flex flex-col justify-between">
                            <div>
                                <label for="code-gen-prompt" class="block text-gray-300 text-sm font-bold mb-2" data-lang-key="enter-prompt"></label>
                                <textarea id="code-gen-prompt" class="shadow appearance-none border border-[#444] rounded w-full py-3 px-4 text-white bg-[#333] leading-tight focus:outline-none focus:shadow-outline h-32 mb-4 resize-y" placeholder="${translations[currentLang]['code-generation-placeholder']}"></textarea>
                                <button id="generate-code-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition-colors duration-200 mr-2" data-lang-key="generate-code-button"></button>
                                <button id="explain-code-btn" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition-colors duration-200" data-lang-key="explain-code-button"></button>
                            </div>
                            <div class="mt-8 flex-grow flex flex-col">
                                <label class="block text-gray-300 text-sm font-bold mb-2" data-lang-key="output-label"></label>
                                <pre id="code-gen-output" class="shadow appearance-none border border-[#444] rounded w-full py-3 px-4 text-gray-300 bg-[#333] leading-tight focus:outline-none focus:shadow-outline flex-grow overflow-y-auto whitespace-pre-wrap" data-lang-key="code-output-placeholder"></pre>
                            </div>
                        </div>
                    `;
                },
                init: function() {
                    const generateBtn = document.getElementById('generate-code-btn');
                    const explainBtn = document.getElementById('explain-code-btn');
                    const promptInput = document.getElementById('code-gen-prompt');
                    const outputDiv = document.getElementById('code-gen-output');

                    generateBtn.onclick = async () => {
                        const prompt = promptInput.value.trim();
                        if (!prompt) {
                            alert(translations[currentLang]['code-prompt-required']);
                            return;
                        }

                        generateBtn.disabled = true;
                        explainBtn.disabled = true;
                        outputDiv.textContent = translations[currentLang]['generating-code'];
                        try {
                            const result = await callBackend('text_generation', prompt); // Use text_generation for code
                            outputDiv.textContent = result;
                        } catch (error) {
                            console.error('Error generating code:', error);
                            outputDiv.textContent = `${translations[currentLang]['error-occurred']}${error.message || translations[currentLang]['error-code-generation']}`;
                        } finally {
                            generateBtn.disabled = false;
                            explainBtn.disabled = false;
                        }
                    };

                    explainBtn.onclick = async () => {
                        const prompt = promptInput.value.trim();
                        if (!prompt) {
                            alert(translations[currentLang]['code-explain-required']);
                            return;
                        }

                        generateBtn.disabled = true;
                        explainBtn.disabled = true;
                        outputDiv.textContent = translations[currentLang]['explaining-code'];
                        try {
                            // Using text_generation tool to explain code
                            const result = await callBackend('text_generation', `Explain the following code: \n\n${prompt}`);
                            if (result) {
                                outputDiv.innerHTML = `<p class="text-gray-300"><strong data-lang-key="code-explanation-label">${translations[currentLang]['code-explanation-label']}</strong> ${result}</p>`;
                            } else {
                                throw new Error(translations[currentLang]['error-explain-code']);
                            }
                        } catch (error) {
                            console.error('Error explaining code:', error);
                            outputDiv.innerHTML = `<span class="text-red-400">${translations[currentLang]['error-occurred']}${error.message || translations[currentLang]['error-explain-code']}</span>`;
                        } finally {
                            generateBtn.disabled = false;
                            explainBtn.disabled = false;
                        }
                    };
                }
            },
            'speech-to-text': {
                titleKey: 'speech-to-text-category',
                descriptionKey: 'speech-to-text-description',
                render: function() {
                    return `
                        <div class="flex-grow flex flex-col justify-between">
                            <div>
                                <label for="simulated-mic-input" class="block text-gray-300 text-sm font-bold mb-2" data-lang-key="simulated-mic-input"></label>
                                <textarea id="simulated-mic-input" class="shadow appearance-none border border-[#444] rounded w-full py-3 px-4 text-white bg-[#333] leading-tight focus:outline-none focus:shadow-outline h-24 mb-4 resize-y" placeholder="${translations[currentLang]['speech-to-text-placeholder']}"></textarea>
                                <button id="start-recording-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition-colors duration-200 mr-2" data-lang-key="start-recording-button"></button>
                                <button id="stop-recording-btn" class="bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition-colors duration-200 hidden" data-lang-key="stop-recording-button"></button>
                                <p id="recording-status" class="text-yellow-400 mt-2 hidden" data-lang-key="recording-message"></p>
                            </div>
                            <div class="mt-8 flex-grow flex flex-col">
                                <label class="block text-gray-300 text-sm font-bold mb-2" data-lang-key="transcription-output-label"></label>
                                <div id="transcription-output" class="shadow appearance-none border border-[#444] rounded w-full py-3 px-4 text-gray-300 bg-[#333] leading-tight focus:outline-none focus:shadow-outline flex-grow overflow-y-auto whitespace-pre-wrap" data-lang-key="transcription-output-placeholder"></div>
                            </div>
                        </div>
                    `;
                },
                init: function() {
                    const startBtn = document.getElementById('start-recording-btn');
                    const stopBtn = document.getElementById('stop-recording-btn');
                    const promptInput = document.getElementById('simulated-mic-input');
                    const outputDiv = document.getElementById('transcription-output');
                    const statusMessage = document.getElementById('recording-status');

                    let isRecording = false;

                    startBtn.onclick = () => {
                        isRecording = true;
                        startBtn.classList.add('hidden');
                        stopBtn.classList.remove('hidden');
                        statusMessage.classList.remove('hidden');
                        outputDiv.textContent = translations[currentLang]['recording-message'];
                    };

                    stopBtn.onclick = async () => {
                        isRecording = false;
                        startBtn.classList.remove('hidden');
                        stopBtn.classList.add('hidden');
                        statusMessage.classList.add('hidden');

                        const prompt = promptInput.value.trim();
                        if (!prompt) {
                            alert(translations[currentLang]['speech-input-required']);
                            outputDiv.textContent = translations[currentLang]['transcription-output-placeholder'];
                            return;
                        }

                        outputDiv.textContent = translations[currentLang]['transcribing'];
                        startBtn.disabled = true;
                        try {
                            const result = await callBackend('text_generation', `Transcribe the following simulated speech to text: "${prompt}"`);
                            if (result) {
                                outputDiv.innerHTML = `<p class="text-gray-300"><strong data-lang-key="transcribed-text-label">${translations[currentLang]['transcribed-text-label']}</strong> ${result}</p>`;
                            } else {
                                throw new Error(translations[currentLang]['error-speech-to-text-connect']);
                            }
                        } catch (error) {
                            console.error('Error transcribing speech:', error);
                            outputDiv.innerHTML = `<span class="text-red-400">${translations[currentLang]['error-occurred']}${error.message || translations[currentLang]['error-speech-to-text-connect']}</span>`;
                        } finally {
                            startBtn.disabled = false;
                        }
                    };
                }
            },
            'text-to-speech': {
                titleKey: 'text-to-speech-category',
                descriptionKey: 'text-to-speech-description',
                render: function() {
                    return `
                        <div class="flex-grow flex flex-col justify-between">
                            <div>
                                <label for="text-to-speech-prompt" class="block text-gray-300 text-sm font-bold mb-2" data-lang-key="enter-prompt"></label>
                                <textarea id="text-to-speech-prompt" class="shadow appearance-none border border-[#444] rounded w-full py-3 px-4 text-white bg-[#333] leading-tight focus:outline-none focus:shadow-outline h-24 mb-4 resize-y" placeholder="${translations[currentLang]['text-to-speech-placeholder']}"></textarea>
                                <button id="generate-speech-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition-colors duration-200 mr-2" data-lang-key="generate-speech-button"></button>
                                <button id="suggest-tone-btn" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition-colors duration-200" data-lang-key="suggest-tone-button"></button>
                            </div>
                            <div class="mt-8 flex-grow flex flex-col">
                                <label class="block text-gray-300 text-sm font-bold mb-2" data-lang-key="output-label"></label>
                                <div id="text-to-speech-output" class="shadow appearance-none border border-[#444] rounded w-full py-3 px-4 text-gray-300 bg-[#333] leading-tight focus:outline-none focus:shadow-outline flex-grow overflow-y-auto whitespace-pre-wrap" data-lang-key="speech-output-placeholder"></div>
                            </div>
                        </div>
                    `;
                },
                init: function() {
                    const generateBtn = document.getElementById('generate-speech-btn');
                    const suggestToneBtn = document.getElementById('suggest-tone-btn');
                    const promptInput = document.getElementById('text-to-speech-prompt');
                    const outputDiv = document.getElementById('text-to-speech-output');

                    generateBtn.onclick = async () => {
                        const prompt = promptInput.value.trim();
                        if (!prompt) {
                            alert(translations[currentLang]['speech-text-required']);
                            return;
                        }

                        generateBtn.disabled = true;
                        suggestToneBtn.disabled = true;
                        outputDiv.textContent = translations[currentLang]['generating-speech'];
                        try {
                            // Text-to-speech would typically return an audio file or URL.
                            // For this demo, we'll simulate by returning a message.
                            const result = await callBackend('text_generation', `Generate a simple text-to-speech message for: "${prompt}". (Respond with confirmation message only, e.g., "Audio generated for: '...'")`);
                            if (result) {
                                // Replace placeholder in generated message
                                const finalMessage = translations[currentLang]['audio-generated-message'].replace('{{text}}', prompt);
                                outputDiv.innerHTML = `<p class="text-green-400">${finalMessage}</p>`;
                            } else {
                                throw new Error(translations[currentLang]['error-text-to-speech']);
                            }
                        } catch (error) {
                            console.error('Error generating speech:', error);
                            outputDiv.innerHTML = `<span class="text-red-400">${translations[currentLang]['error-occurred']}${error.message || translations[currentLang]['error-text-to-speech']}</span>`;
                        } finally {
                            generateBtn.disabled = false;
                            suggestToneBtn.disabled = false;
                        }
                    };

                    suggestToneBtn.onclick = async () => {
                        const prompt = promptInput.value.trim();
                        if (!prompt) {
                            alert(translations[currentLang]['tone-suggestion-required']);
                            return;
                        }

                        generateBtn.disabled = true;
                        suggestToneBtn.disabled = true;
                        outputDiv.textContent = translations[currentLang]['suggesting-tone'];
                        try {
                            const result = await callBackend('text_generation', `Suggest a suitable tone (e.g., formal, friendly, urgent) for the following text: "${prompt}". (Respond with only the tone suggestion)`);
                            if (result) {
                                outputDiv.innerHTML = `<p class="text-gray-300"><strong data-lang-key="suggested-tone-label">${translations[currentLang]['suggested-tone-label']}</strong> ${result}</p>`;
                            } else {
                                throw new Error(translations[currentLang]['error-text-to-speech']); // Re-using error for now
                            }
                        } catch (error) {
                            console.error('Error suggesting tone:', error);
                            outputDiv.innerHTML = `<span class="text-red-400">${translations[currentLang]['error-occurred']}${error.message || translations[currentLang]['error-text-to-speech']}</span>`;
                        } finally {
                            generateBtn.disabled = false;
                            suggestToneBtn.disabled = false;
                        }
                    };
                }
            },
            'data-analysis': {
                titleKey: 'data-analysis-category',
                descriptionKey: 'data-analysis-description',
                render: function() {
                    return `
                        <div class="flex-grow flex flex-col justify-between">
                            <div>
                                <label for="data-analysis-prompt" class="block text-gray-300 text-sm font-bold mb-2" data-lang-key="enter-prompt"></label>
                                <textarea id="data-analysis-prompt" class="shadow appearance-none border border-[#444] rounded w-full py-3 px-4 text-white bg-[#333] leading-tight focus:outline-none focus:shadow-outline h-32 mb-4 resize-y" placeholder="${translations[currentLang]['data-analysis-placeholder']}"></textarea>
                                <button id="analyze-data-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition-colors duration-200 mr-2" data-lang-key="analyze-data-button"></button>
                                <button id="generate-report-summary-btn" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition-colors duration-200" data-lang-key="generate-report-summary-button"></button>
                            </div>
                            <div class="mt-8 flex-grow flex flex-col">
                                <label class="block text-gray-300 text-sm font-bold mb-2" data-lang-key="output-label"></label>
                                <div id="data-analysis-output" class="shadow appearance-none border border-[#444] rounded w-full py-3 px-4 text-gray-300 bg-[#333] leading-tight focus:outline-none focus:shadow-outline flex-grow overflow-y-auto whitespace-pre-wrap" data-lang-key="data-analysis-output-placeholder"></div>
                            </div>
                        </div>
                    `;
                },
                init: function() {
                    const analyzeBtn = document.getElementById('analyze-data-btn');
                    const reportSummaryBtn = document.getElementById('generate-report-summary-btn');
                    const promptInput = document.getElementById('data-analysis-prompt');
                    const outputDiv = document.getElementById('data-analysis-output');

                    analyzeBtn.onclick = async () => {
                        const prompt = promptInput.value.trim();
                        if (!prompt) {
                            alert(translations[currentLang]['data-analysis-required']);
                            return;
                        }

                        analyzeBtn.disabled = true;
                        reportSummaryBtn.disabled = true;
                        outputDiv.textContent = translations[currentLang]['analyzing-data'];
                        try {
                            const result = await callBackend('text_generation', `Analyze the following data and provide insights: "${prompt}"`);
                            if (result) {
                                outputDiv.innerHTML = `<p class="text-gray-300"><strong data-lang-key="analysis-result-label">${translations[currentLang]['analysis-result-label']}</strong> ${result}</p>`;
                            } else {
                                throw new Error(translations[currentLang]['error-data-analysis']);
                            }
                        } catch (error) {
                            console.error('Error analyzing data:', error);
                            outputDiv.innerHTML = `<span class="text-red-400">${translations[currentLang]['error-occurred']}${error.message || translations[currentLang]['error-data-analysis']}</span>`;
                        } finally {
                            analyzeBtn.disabled = false;
                            reportSummaryBtn.disabled = false;
                        }
                    };

                    reportSummaryBtn.onclick = async () => {
                        const prompt = promptInput.value.trim();
                        if (!prompt) {
                            alert(translations[currentLang]['report-summary-required']);
                            return;
                        }

                        analyzeBtn.disabled = true;
                        reportSummaryBtn.disabled = true;
                        outputDiv.textContent = translations[currentLang]['generating-report-summary'];
                        try {
                            const result = await callBackend('text_generation', `Generate a concise report summary based on the following data or text: "${prompt}"`);
                            if (result) {
                                outputDiv.innerHTML = `<p class="text-gray-300"><strong data-lang-key="report-summary-label">${translations[currentLang]['report-summary-label']}</strong> ${result}</p>`;
                            } else {
                                throw new Error(translations[currentLang]['error-report-summary']);
                            }
                        } catch (error) {
                            console.error('Error generating report summary:', error);
                            outputDiv.innerHTML = `<span class="text-red-400">${translations[currentLang]['error-occurred']}${error.message || translations[currentLang]['error-report-summary']}</span>`;
                        } finally {
                            analyzeBtn.disabled = false;
                            reportSummaryBtn.disabled = false;
                        }
                    };
                }
            },
            'translation': {
                titleKey: 'translation-category',
                descriptionKey: 'translation-description',
                render: function() {
                    return `
                        <div class="flex-grow flex flex-col justify-between">
                            <div>
                                <label for="translation-prompt" class="block text-gray-300 text-sm font-bold mb-2" data-lang-key="enter-prompt"></label>
                                <textarea id="translation-prompt" class="shadow appearance-none border border-[#444] rounded w-full py-3 px-4 text-white bg-[#333] leading-tight focus:outline-none focus:shadow-outline h-32 mb-4 resize-y" placeholder="${translations[currentLang]['translation-placeholder']}"></textarea>
                                <button id="translate-text-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition-colors duration-200 mr-2" data-lang-key="translate-text-button"></button>
                                <button id="detect-language-btn" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition-colors duration-200" data-lang-key="detect-language-button"></button>
                            </div>
                            <div class="mt-8 flex-grow flex flex-col">
                                <label class="block text-gray-300 text-sm font-bold mb-2" data-lang-key="output-label"></label>
                                <div id="translation-output" class="shadow appearance-none border border-[#444] rounded w-full py-3 px-4 text-gray-300 bg-[#333] leading-tight focus:outline-none focus:shadow-outline flex-grow overflow-y-auto whitespace-pre-wrap" data-lang-key="translation-output-placeholder"></div>
                            </div>
                        </div>
                    `;
                },
                init: function() {
                    const translateBtn = document.getElementById('translate-text-btn');
                    const detectLangBtn = document.getElementById('detect-language-btn');
                    const promptInput = document.getElementById('translation-prompt');
                    const outputDiv = document.getElementById('translation-output');

                    translateBtn.onclick = async () => {
                        const prompt = promptInput.value.trim();
                        if (!prompt) {
                            alert(translations[currentLang]['translation-text-required']);
                            return;
                        }

                        translateBtn.disabled = true;
                        detectLangBtn.disabled = true;
                        outputDiv.textContent = translations[currentLang]['translating'];
                        try {
                            const result = await callBackend('text_generation', `Translate the following text as requested: "${prompt}"`);
                            if (result) {
                                outputDiv.innerHTML = `<p class="text-gray-300"><strong data-lang-key="translation-label">${translations[currentLang]['translation-label']}</strong> ${result}</p>`;
                            } else {
                                throw new Error(translations[currentLang]['error-translation']);
                            }
                        } catch (error) {
                            console.error('Error translating text:', error);
                            outputDiv.innerHTML = `<span class="text-red-400">${translations[currentLang]['error-occurred']}${error.message || translations[currentLang]['error-translation']}</span>`;
                        } finally {
                            translateBtn.disabled = false;
                            detectLangBtn.disabled = false;
                        }
                    };

                    detectLangBtn.onclick = async () => {
                        const prompt = promptInput.value.trim();
                        if (!prompt) {
                            alert(translations[currentLang]['language-detection-required']);
                            return;
                        }

                        translateBtn.disabled = true;
                        detectLangBtn.disabled = true;
                        outputDiv.textContent = translations[currentLang]['detecting-language'];
                        try {
                            const result = await callBackend('text_generation', `Detect the language of the following text and respond only with the detected language name: "${prompt}"`);
                            if (result) {
                                outputDiv.innerHTML = `<p class="text-gray-300"><strong data-lang-key="detected-language-label">${translations[currentLang]['detected-language-label']}</strong> ${result}</p>`;
                            } else {
                                throw new Error(translations[currentLang]['error-detect-language']);
                            }
                        } catch (error) {
                            console.error('Error detecting language:', error);
                            outputDiv.innerHTML = `<span class="text-red-400">${translations[currentLang]['error-occurred']}${error.message || translations[currentLang]['error-detect-language']}</span>`;
                        } finally {
                            translateBtn.disabled = false;
                            detectLangBtn.disabled = false;
                        }
                    };
                }
            },
            'summarization': {
                titleKey: 'summarization-category',
                descriptionKey: 'summarization-description',
                render: function() {
                    return `
                        <div class="flex-grow flex flex-col justify-between">
                            <div>
                                <label for="summarization-prompt" class="block text-gray-300 text-sm font-bold mb-2" data-lang-key="enter-prompt"></label>
                                <textarea id="summarization-prompt" class="shadow appearance-none border border-[#444] rounded w-full py-3 px-4 text-white bg-[#333] leading-tight focus:outline-none focus:shadow-outline h-32 mb-4 resize-y" placeholder="${translations[currentLang]['summarization-placeholder']}"></textarea>
                                <button id="summarize-text-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition-colors duration-200 mr-2" data-lang-key="summarize-text-button"></button>
                                <button id="extract-keywords-btn" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition-colors duration-200" data-lang-key="extract-keywords-button"></button>
                            </div>
                            <div class="mt-8 flex-grow flex flex-col">
                                <label class="block text-gray-300 text-sm font-bold mb-2" data-lang-key="output-label"></label>
                                <div id="summarization-output" class="shadow appearance-none border border-[#444] rounded w-full py-3 px-4 text-gray-300 bg-[#333] leading-tight focus:outline-none focus:shadow-outline flex-grow overflow-y-auto whitespace-pre-wrap" data-lang-key="summary-output-placeholder"></div>
                            </div>
                        </div>
                    `;
                },
                init: function() {
                    const summarizeBtn = document.getElementById('summarize-text-btn');
                    const extractKeywordsBtn = document.getElementById('extract-keywords-btn');
                    const promptInput = document.getElementById('summarization-prompt');
                    const outputDiv = document.getElementById('summarization-output');

                    summarizeBtn.onclick = async () => {
                        const prompt = promptInput.value.trim();
                        if (!prompt) {
                            alert(translations[currentLang]['summarization-text-required']);
                            return;
                        }

                        summarizeBtn.disabled = true;
                        extractKeywordsBtn.disabled = true;
                        outputDiv.textContent = translations[currentLang]['summarizing'];
                        try {
                            const result = await callBackend('text_generation', `Summarize the following text: "${prompt}"`);
                            if (result) {
                                outputDiv.innerHTML = `<p class="text-gray-300"><strong data-lang-key="summary-label">${translations[currentLang]['summary-label']}</strong> ${result}</p>`;
                            } else {
                                throw new Error(translations[currentLang]['error-summarization']);
                            }
                        } catch (error) {
                            console.error('Error summarizing text:', error);
                            outputDiv.innerHTML = `<span class="text-red-400">${translations[currentLang]['error-occurred']}${error.message || translations[currentLang]['error-summarization']}</span>`;
                        } finally {
                            summarizeBtn.disabled = false;
                            extractKeywordsBtn.disabled = false;
                        }
                    };

                    extractKeywordsBtn.onclick = async () => {
                        const prompt = promptInput.value.trim();
                        if (!prompt) {
                            alert(translations[currentLang]['keywords-extraction-required']);
                            return;
                        }

                        summarizeBtn.disabled = true;
                        extractKeywordsBtn.disabled = true;
                        outputDiv.textContent = translations[currentLang]['extracting-keywords'];
                        try {
                            const result = await callBackend('text_generation', `Extract the main keywords from the following text (comma-separated): "${prompt}"`);
                            if (result) {
                                outputDiv.innerHTML = `<p class="text-gray-300"><strong data-lang-key="keywords-label">${translations[currentLang]['keywords-label']}</strong> ${result}</p>`;
                            } else {
                                throw new Error(translations[currentLang]['error-extract-keywords']);
                            }
                        } catch (error) {
                            console.error('Error extracting keywords:', error);
                            outputDiv.innerHTML = `<span class="text-red-400">${translations[currentLang]['error-occurred']}${error.message || translations[currentLang]['error-extract-keywords']}</span>`;
                        } finally {
                            summarizeBtn.disabled = false;
                            extractKeywordsBtn.disabled = false;
                        }
                    };
                }
            },
            'chatbot': {
                titleKey: 'chatbot-category',
                descriptionKey: 'chatbot-description',
                render: function() {
                    return `
                        <div class="flex-grow flex flex-col justify-between">
                            <div>
                                <label for="chatbot-prompt" class="block text-gray-300 text-sm font-bold mb-2" data-lang-key="chat-with-ai-label"></label>
                                <textarea id="chatbot-prompt" class="shadow appearance-none border border-[#444] rounded w-full py-3 px-4 text-white bg-[#333] leading-tight focus:outline-none focus:shadow-outline h-24 mb-4 resize-y" placeholder="${translations[currentLang]['chatbot-placeholder']}"></textarea>
                                <button id="send-message-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition-colors duration-200 mr-2" data-lang-key="send-message-button"></button>
                                <button id="summarize-conversation-btn" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition-colors duration-200" data-lang-key="summarize-conversation-button"></button>
                            </div>
                            <div class="mt-8 flex-grow flex flex-col">
                                <label class="block text-gray-300 text-sm font-bold mb-2" data-lang-key="output-label"></label>
                                <div id="chatbot-output" class="shadow appearance-none border border-[#444] rounded w-full py-3 px-4 text-gray-300 bg-[#333] leading-tight focus:outline-none focus:shadow-outline flex-grow overflow-y-auto whitespace-pre-wrap" data-lang-key="chatbot-output-placeholder"></div>
                            </div>
                        </div>
                    `;
                },
                init: function() {
                    const sendBtn = document.getElementById('send-message-btn');
                    const summarizeConvBtn = document.getElementById('summarize-conversation-btn');
                    const promptInput = document.getElementById('chatbot-prompt');
                    const outputDiv = document.getElementById('chatbot-output');

                    sendBtn.onclick = async () => {
                        const prompt = promptInput.value.trim();
                        if (!prompt) {
                            alert(translations[currentLang]['chatbot-message-required']);
                            return;
                        }

                        sendBtn.disabled = true;
                        summarizeConvBtn.disabled = true;
                        outputDiv.textContent = translations[currentLang]['thinking'];
                        try {
                            const result = await callBackend('text_generation', prompt); // Use text_generation for chatbot
                            if (result) {
                                outputDiv.innerHTML = `<p class="text-gray-300"><strong data-lang-key="chatbot-response-label">${translations[currentLang]['chatbot-response-label']}</strong> ${result}</p>`;
                            } else {
                                throw new Error(translations[currentLang]['error-chatbot']);
                            }
                        } catch (error) {
                            console.error('Error getting chatbot response:', error);
                            outputDiv.innerHTML = `<span class="text-red-400">${translations[currentLang]['error-occurred']}${error.message || translations[currentLang]['error-chatbot']}</span>`;
                        } finally {
                            sendBtn.disabled = false;
                            summarizeConvBtn.disabled = false;
                        }
                    };

                    summarizeConvBtn.onclick = async () => {
                        const prompt = promptInput.value.trim();
                        if (!prompt) {
                            alert(translations[currentLang]['conversation-summary-required']);
                            return;
                        }

                        sendBtn.disabled = true;
                        summarizeConvBtn.disabled = true;
                        outputDiv.textContent = translations[currentLang]['summarizing-conversation'];
                        try {
                            const result = await callBackend('text_generation', `Summarize the following conversation: "${prompt}"`);
                            if (result) {
                                outputDiv.innerHTML = `<p class="text-gray-300"><strong data-lang-key="conversation-summary-label">${translations[currentLang]['conversation-summary-label']}</strong> ${result}</p>`;
                            } else {
                                throw new Error(translations[currentLang]['error-conversation-summary']);
                            }
                        } catch (error) {
                            console.error('Error summarizing conversation:', error);
                            outputDiv.innerHTML = `<span class="text-red-400">${translations[currentLang]['error-occurred']}${error.message || translations[currentLang]['error-conversation-summary']}</span>`;
                        } finally {
                            sendBtn.disabled = false;
                            summarizeConvBtn.disabled = false;
                        }
                    };
                }
            },
            'object-detection': {
                titleKey: 'object-detection-category',
                descriptionKey: 'object-detection-description',
                render: function() {
                    return `
                        <div class="flex-grow flex flex-col justify-between">
                            <div>
                                <label for="object-detection-prompt" class="block text-gray-300 text-sm font-bold mb-2" data-lang-key="describe-image-label"></label>
                                <textarea id="object-detection-prompt" class="shadow appearance-none border border-[#444] rounded w-full py-3 px-4 text-white bg-[#333] leading-tight focus:outline-none focus:shadow-outline h-24 mb-4 resize-y" placeholder="${translations[currentLang]['object-detection-placeholder']}"></textarea>
                                <button id="detect-objects-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition-colors duration-200 mr-2" data-lang-key="detect-objects-button"></button>
                                <button id="image-captioning-btn" class="bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition-colors duration-200" data-lang-key="image-captioning-button"></button>
                            </div>
                            <div class="mt-8 flex-grow flex flex-col">
                                <label class="block text-gray-300 text-sm font-bold mb-2" data-lang-key="output-label"></label>
                                <div id="object-detection-output" class="shadow appearance-none border border-[#444] rounded w-full py-3 px-4 text-gray-300 bg-[#333] leading-tight focus:outline-none focus:shadow-outline flex-grow overflow-y-auto whitespace-pre-wrap" data-lang-key="object-detection-output-placeholder"></div>
                            </div>
                        </div>
                    `;
                },
                init: function() {
                    const detectBtn = document.getElementById('detect-objects-btn');
                    const captionBtn = document.getElementById('image-captioning-btn');
                    const promptInput = document.getElementById('object-detection-prompt');
                    const outputDiv = document.getElementById('object-detection-output');

                    detectBtn.onclick = async () => {
                        const prompt = promptInput.value.trim();
                        if (!prompt) {
                            alert(translations[currentLang]['object-detection-required']);
                            return;
                        }

                        detectBtn.disabled = true;
                        captionBtn.disabled = true;
                        outputDiv.textContent = translations[currentLang]['detecting-objects'];
                        try {
                            const result = await callBackend('text_generation', `Describe objects found in an image matching this description: "${prompt}" (e.g., "A red car, two people, a dog"). Respond only with the object list.`);
                            if (result) {
                                outputDiv.innerHTML = `<p class="text-gray-300"><strong data-lang-key="detected-objects-label">${translations[currentLang]['detected-objects-label']}</strong> ${result}</p>`;
                            } else {
                                throw new Error(translations[currentLang]['error-object-detection']);
                            }
                        } catch (error) {
                            console.error('Error detecting objects:', error);
                            outputDiv.innerHTML = `<span class="text-red-400">${translations[currentLang]['error-occurred']}${error.message || translations[currentLang]['error-object-detection']}</span>`;
                        } finally {
                            detectBtn.disabled = false;
                            captionBtn.disabled = false;
                        }
                    };

                    captionBtn.onclick = async () => {
                        const prompt = promptInput.value.trim();
                        if (!prompt) {
                            alert(translations[currentLang]['image-captioning-required']);
                            return;
                        }

                        detectBtn.disabled = true;
                        captionBtn.disabled = true;
                        outputDiv.textContent = translations[currentLang]['generating-image-caption'];
                        try {
                            const result = await callBackend('text_generation', `Generate a short caption for an image described as: "${prompt}". Respond only with the caption.`);
                            if (result) {
                                outputDiv.innerHTML = `<p class="text-gray-300"><strong data-lang-key="image-caption-label">${translations[currentLang]['image-caption-label']}</strong> ${result}</p>`;
                            } else {
                                throw new Error(translations[currentLang]['error-image-captioning']);
                            }
                        } catch (error) {
                            console.error('Error generating image caption:', error);
                            outputDiv.innerHTML = `<span class="text-red-400">${translations[currentLang]['error-occurred']}${error.message || translations[currentLang]['error-image-captioning']}</span>`;
                        } finally {
                            detectBtn.disabled = false;
                            captionBtn.disabled = false;
                        }
                    };
                }
            },
            'idea-brainstormer': {
                titleKey: 'idea-brainstormer-category',
                descriptionKey: 'idea-brainstormer-description',
                render: function() {
                    return `
                        <div class="flex-grow flex flex-col justify-between">
                            <div>
                                <label for="brainstormer-prompt" class="block text-gray-300 text-sm font-bold mb-2" data-lang-key="enter-topic-label"></label>
                                <textarea id="brainstormer-prompt" class="shadow appearance-none border border-[#444] rounded w-full py-3 px-4 text-white bg-[#333] leading-tight focus:outline-none focus:shadow-outline h-32 mb-4 resize-y" placeholder="${translations[currentLang]['idea-brainstormer-placeholder']}"></textarea>
                                <button id="brainstorm-ideas-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition-colors duration-200" data-lang-key="brainstorm-ideas-button"></button>
                            </div>
                            <div class="mt-8 flex-grow flex flex-col">
                                <label class="block text-gray-300 text-sm font-bold mb-2" data-lang-key="output-label"></label>
                                <div id="brainstormer-output" class="shadow appearance-none border border-[#444] rounded w-full py-3 px-4 text-gray-300 bg-[#333] leading-tight focus:outline-none focus:shadow-outline flex-grow overflow-y-auto whitespace-pre-wrap" data-lang-key="brainstorm-output-placeholder"></div>
                            </div>
                        </div>
                    `;
                },
                init: function() {
                    const brainstormBtn = document.getElementById('brainstorm-ideas-btn');
                    const promptInput = document.getElementById('brainstormer-prompt');
                    const outputDiv = document.getElementById('brainstormer-output');

                    brainstormBtn.onclick = async () => {
                        const prompt = promptInput.value.trim();
                        if (!prompt) {
                            alert(translations[currentLang]['brainstorm-topic-required']);
                            return;
                        }

                        brainstormBtn.disabled = true;
                        outputDiv.textContent = translations[currentLang]['brainstorming'];
                        try {
                            const result = await callBackend('text_generation', `Brainstorm creative ideas for: "${prompt}"`);
                            if (result) {
                                outputDiv.innerHTML = `<p class="text-gray-300"><strong data-lang-key="brainstormed-ideas-label">${translations[currentLang]['brainstormed-ideas-label']}</strong> ${result}</p>`;
                            } else {
                                throw new Error(translations[currentLang]['error-idea-brainstorming']);
                            }
                        } catch (error) {
                            console.error('Error brainstorming ideas:', error);
                            outputDiv.innerHTML = `<span class="text-red-400">${translations[currentLang]['error-occurred']}${error.message || translations[currentLang]['error-idea-brainstorming']}</span>`;
                        } finally {
                            brainstormBtn.disabled = false;
                        }
                    };
                }
            },
        };

        // Function to render selected tool UI
        let currentActiveCategory = null;
        function renderTool(category) {
            const tool = tools[category];
            const toolInteractionArea = document.getElementById('tool-interaction-area');
            const toolTitle = document.getElementById('tool-title');
            const toolDescription = document.getElementById('tool-description');

            if (tool) {
                toolTitle.textContent = translations[currentLang][tool.titleKey];
                toolDescription.textContent = translations[currentLang][tool.descriptionKey];
                toolInteractionArea.innerHTML = tool.render();
                tool.init();
                currentActiveCategory = category;
                applyTranslations(); // Re-apply translations for newly rendered elements
            } else {
                toolTitle.textContent = translations[currentLang]['tool-not-found'];
                toolDescription.textContent = translations[currentLang]['select-valid-tool'];
                toolInteractionArea.innerHTML = '';
                currentActiveCategory = null;
            }
        }

        // Event listener for sidebar category clicks
        document.getElementById('category-list').addEventListener('click', (event) => {
            event.preventDefault(); // Prevent default link behavior
            const target = event.target.closest('a');
            if (target && target.dataset.category) {
                renderTool(target.dataset.category);
                // Optional: Highlight active category
                document.querySelectorAll('#category-list a').forEach(link => {
                    link.classList.remove('bg-[#333]');
                    link.classList.add('text-gray-300');
                });
                target.classList.add('bg-[#333]');
                target.classList.remove('text-gray-300');
            }
        });

        // Initial setup
        document.addEventListener('DOMContentLoaded', () => {
            applyTranslations(); // Apply initial translations
        });
    </script>
</body>
</html>
